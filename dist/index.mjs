import e from"react";import{Swipeable as t}from"react-swipeable";var i=4;function n(e){return Math.round(3*e)}function r(e){return e<.3}var l=function(l){function o(e){var t=this;l.call(this,e),this.wrapperEls=[],this.currentIndex=0,this.left=0,this.handleSwiping=function(e){if(null==t.sliderWidth&&(t.sliderWidth=t.getSliderWidth()),!1!==t.sliderWidth&&r(e.velocity)){t.clearAutoPlayTimer(),null==t.originLeft&&(t.originLeft=t.left);var i=t.originLeft-e.deltaX,n=t.sliderWidth,l=n.containerElWidth-n.innerElWidth;t.left=i>0?0:i<l?l:i,t.setState({left:t.left,disableTransition:!0})}},this.handleSwiped=function(e){var i=t.sliderWidth;if(null!=t.sliderWidth&&(t.sliderWidth=void 0),!1!==i&&r(e.velocity)){t.resetAutoPlayTimer(),t.originLeft=void 0;for(var n=t.wrapperEls.length,l=0,o=0;o<n;o++){var a=t.wrapperEls[o];if(a){var s=a.getBoundingClientRect().width+t.getPadding();if(-(l+=s)<t.left){t.slideToNIndex({index:l+t.left<s/2?o+1:o,disableTransition:!1});break}}}}},this.handleSwipedLeft=function(e){if(!r(e.velocity)){var i=null!=t.props.itemsPerSwipe?t.props.itemsPerSwipe:n(e.velocity),l=t.currentIndex+i,o=l>t.wrapperEls.length-1?t.wrapperEls.length-1:l;t.resetAutoPlayTimer(),t.slideToNIndex({index:o,cb:t.resetIndex})}},this.handleSwipedRight=function(e){if(!r(e.velocity)){var i=null!=t.props.itemsPerSwipe?t.props.itemsPerSwipe:n(e.velocity),l=t.currentIndex-i,o=l<0?0:l;t.resetAutoPlayTimer(),t.slideToNIndex({index:o,cb:t.resetIndex})}},this.resetIndex=function(){t.props.infinite&&(clearTimeout(t.resetIndexTimer),t.resetIndexTimer=setTimeout(function(){if(Array.isArray(t.props.children)){var e=t.props.children.length,n=t.currentIndex%e+e*i;n!==t.currentIndex&&t.slideToIndexWithoutTransition(n)}},500))},this.slideToNIndex=function(e){var i=e.index,n=e.cb,r=e.disableTransition,l=t.getSliderWidth();if(!1!==l){for(var o,a=l.containerElWidth-l.innerElWidth,s=0,d=0;d<i;d++){var p=t.wrapperEls[d];if(p&&-(s+=p.getBoundingClientRect().width+t.getPadding())<a){o=d+1;break}}t.left=null!=o?a:-s,t.maxIndex=o,t.currentIndex=null!=o?o:i,t.setState({left:t.left,disableTransition:null!=r&&r},n)}},this.state={left:0,disableTransition:!1}}return l&&(o.__proto__=l),(o.prototype=Object.create(l&&l.prototype)).constructor=o,o.prototype.componentDidMount=function(){this.init()},o.prototype.init=function(){var e=this;if(Array.isArray(this.props.children)){if(this.props.infinite){var t=this.props.children.length;setTimeout(function(){e.slideToIndexWithoutTransition(t*i)},3e3)}this.resetAutoPlayTimer()}},o.prototype.render=function(){var n=this,r=this.props,l=r.children,o=r.infinite,a=r.disableSlowSwipe,s=r.className,d=r.classNameInner,p=r.align;if(void 0===p&&(p="center"),!Array.isArray(l))return null;var h=o?[]:l;if(o)for(var u=0;u<2*i+1;u++)h.push.apply(h,l);var c=this.getPadding(),f=h.length;return e.createElement(t,{preventDefaultTouchmoveEvent:!0,onSwiping:a?void 0:this.handleSwiping,onSwiped:a?void 0:this.handleSwiped,onSwipedLeft:this.handleSwipedLeft,onSwipedRight:this.handleSwipedRight},e.createElement("div",{className:s,ref:function(e){return n.containerEl=e},style:{overflow:"hidden"}},e.createElement("div",{className:d,ref:function(e){return n.innerEl=e},style:{float:"left",display:"flex",flexWrap:"nowrap",alignItems:"top"===p?"flex-start":"center"===p?"center":"flex-end",transform:"translateX("+this.state.left+"px)",transition:this.state.disableTransition?"none":"transform 0.5s ease-out"}},h.map(function(t,i){return e.createElement("div",{key:i,style:{display:"flex",marginRight:i!==f-1?c||10:0},ref:function(e){n.wrapperEls[i]=e}},t)})),e.createElement("div",{style:{clear:"both",height:0}})))},o.prototype.getPadding=function(){return null!=this.props.padding?this.props.padding:10},o.prototype.getSliderWidth=function(){if(null==this.innerEl||null==this.containerEl)return!1;var e=this.innerEl.getBoundingClientRect().width,t=this.containerEl.getBoundingClientRect().width;return!(e<t)&&{innerElWidth:e,containerElWidth:t}},o.prototype.slideToIndexWithoutTransition=function(e){this.slideToNIndex({index:e,disableTransition:!0})},o.prototype.clearAutoPlayTimer=function(){clearInterval(this.autoPlayTimer)},o.prototype.resetAutoPlayTimer=function(){var e=this;this.props.autoPlay&&(this.clearAutoPlayTimer(),this.autoPlayTimer=setInterval(function(){e.slideToNIndex(null==e.maxIndex?{index:e.currentIndex+1}:{index:0})},Math.round(1e3*(this.props.autoPlayDuration||3))))},o}(e.Component);export{l as Carousel};
//# sourceMappingURL=index.mjs.map
